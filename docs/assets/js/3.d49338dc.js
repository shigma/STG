(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{29:function(module,__webpack_exports__,__webpack_require__){"use strict";var _Code__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(66),_Toolbar__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(63),_Explorer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(64),_Settings__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(65),_utils_vnode__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(58),web_stg__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(59),web_stg__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(web_stg__WEBPACK_IMPORTED_MODULE_5__),web_stg_dist_stg_min_css__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(60),web_stg_dist_stg_min_css__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(web_stg_dist_stg_min_css__WEBPACK_IMPORTED_MODULE_6__),_dist_icons_css__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(61),_dist_icons_css__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_dist_icons_css__WEBPACK_IMPORTED_MODULE_7__);web_stg__WEBPACK_IMPORTED_MODULE_5__.config.publicPath="/assets/img/";const toolbarData=[{icon:"folder",text:"浏览"},{icon:"source",text:"代码"},{icon:"settings",text:"设置"}];__webpack_exports__.a={components:{Toolbar:_Toolbar__WEBPACK_IMPORTED_MODULE_1__.a,Settings:_Settings__WEBPACK_IMPORTED_MODULE_3__.a,Code:_Code__WEBPACK_IMPORTED_MODULE_0__.a,Explorer:_Explorer__WEBPACK_IMPORTED_MODULE_2__.a},props:{width:{type:Number,default:480},height:{type:Number,default:560},autoRun:Boolean},data:()=>({toolbarData:toolbarData,leftWidth:null,rightWidth:null,tabMovingToRight:0,tabIndex:null,fileIndex:0,stats:null,active:!1}),computed:{aspectRatio(){return this.width/this.height}},watch:{fileIndex:"setBarrage",async tabIndex(t,e){null!==this.oldValue&&(this.tabMovingToRight=t>e)}},created(){this.tabIndex=1,this.multiFile=this.$slots.default.length>1,this.files=this.$slots.default.map(vnode=>{const code=Object(_utils_vnode__WEBPACK_IMPORTED_MODULE_4__.a)(vnode),exports={},module={code:code,exports:exports},require=()=>web_stg__WEBPACK_IMPORTED_MODULE_5__;try{const args="(exports,module,require)";eval(`(${args}=>{${code}})${args}`)}catch(t){console.error(t),console.warn("An error encounted in: \n"+code)}return module})},async mounted(){this.layout(),addEventListener("resize",()=>this.layout()),await web_stg__WEBPACK_IMPORTED_MODULE_5__.loadImages({bullet1:"bullet/bullet1.png",bullet2:"bullet/bullet2.png",bullet3:"bullet/bullet3.png"}),web_stg__WEBPACK_IMPORTED_MODULE_5__.buildFromImages("bullet1",web_stg__WEBPACK_IMPORTED_MODULE_5__.touhou.v2_1),web_stg__WEBPACK_IMPORTED_MODULE_5__.buildFromImages("bullet2",web_stg__WEBPACK_IMPORTED_MODULE_5__.touhou.v2_2),web_stg__WEBPACK_IMPORTED_MODULE_5__.buildFromImages("bullet3",web_stg__WEBPACK_IMPORTED_MODULE_5__.touhou.v2_3),this.field=new web_stg__WEBPACK_IMPORTED_MODULE_5__.Field(this.$refs.field,{width:this.width,height:this.height,statsInterval:50,onPause:()=>this.active=!1,onResume:()=>this.active=!0,onStats:t=>this.stats=t}),this.autoRun||await this.field.setPlayer({}),await this.setBarrage()},methods:{async layout(){await this.$nextTick();const t=this.$el.parentElement?this.$el.parentElement.offsetWidth:1/0;this.rightWidth=Math.min(t/2,(innerHeight-100)*this.aspectRatio),this.leftWidth=t-this.rightWidth},async setBarrage(){this.field&&(await this.field.setBarrage(this.files[this.fileIndex].exports),this.autoRun&&this.field.toggle())},toggle(){this.field&&this.field.toggle()}}}},30:function(t,e,s){},31:function(t,e,s){},32:function(t,e,s){},33:function(t,e,s){},34:function(t,e,s){},35:function(t,e,s){},53:function(t,e,s){"use strict";var i=s(30);s.n(i).a},54:function(t,e,s){"use strict";var i=s(31);s.n(i).a},55:function(t,e,s){"use strict";var i=s(32);s.n(i).a},56:function(t,e,s){"use strict";var i=s(33);s.n(i).a},57:function(t,e,s){"use strict";var i=s(34);s.n(i).a},58:function(t,e,s){"use strict";function i(t){return void 0===t.tag&&void 0!==t.text?t.text:t.children.map(i).join("")}s.d(e,"a",function(){return i})},59:function(t,e){t.exports=function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=18)}([function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(s(1)),o=s(19),r={images:{}};async function a(t={}){const e=[];for(const s in t)s in r.images||(r.images[s]=fetch(o.resolve(n.default.publicPath,t[s])).then(t=>t.blob()).then(createImageBitmap).then(t=>r.images[s]=t).catch(()=>delete r.images[s])),e.push(r.images[s]);return await Promise.all(e),r.images}e.default=r,e.loadImages=a,e.checkImages=function(...t){t.forEach(t=>{if(!(t in r.images&&"function"!=typeof r.images[t].then))throw new Error(`Asset ${t} has not been loaded.`)})},e.loadAssets=async function(t={}){return await Promise.all([a(t.images)]),r}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={angleUnit:Math.PI,defaultColor:"blue",publicPath:"",showWarning:!0}},function(t,e,s){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(s(28));e.random=o;const r=n(s(15));e.memorize=r.default;const a=n(s(29));e.math=a.default},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(s(1)),o=s(2),r=s(0),a=i(s(5)),l=i(s(6));e.default=class extends l.default{constructor(t={}){super(),this._point={x:0,y:0,face:0},this._displayHook=t.display,this._mountedHook=t.mounted?[t.mounted]:[],this._mutateHook=t.mutate?[t.mutate]:[],Object.assign(this,t.methods);const e="function"==typeof t.state?t.state.call(this):t.state;Object.assign(this,e),this.color||(this.color=n.default.defaultColor)}get x(){return this._point.x}get y(){return this._point.y}get face(){return this._point.face}set x(t){this._point.x=t,this._coordinate=null}set y(t){this._point.y=t,this._coordinate=null}set face(t){this._point.face=t,this._coordinate=null}_mounted(){this._mountedHook.forEach(t=>t.call(this)),this._mutateHook.forEach(t=>this.setTask(t))}render(){this.$context&&"function"==typeof this._displayHook&&this._displayHook.call(this,this.$tick)}get $coord(){return this._coordinate&&this.$tick===this._coordinate.$birth||(this._coordinate=new a.default(this.x,this.y,this.face),this._coordinate.$birth=this.$tick),this._coordinate}emitBullets(...t){this.$parent.$refs.source=this,this.$parent.emitBullets(...t),delete this.$parent.$refs.source}drawImage(t,e={},s){r.checkImages(t);const{x:i,y:a,face:l}=this.$coord,h=this.$assets.images[t],{xStart:u,xEnd:c,yStart:f,yEnd:d}=s||{xStart:0,yStart:0,xEnd:h.width,yEnd:h.height},_=c-u,p=d-f,{scale:m=1,xOffset:g=0,yOffset:y=0,rotate:v=l}=e,b=_*m,x=p*m,w=-(_/2+g)*m,O=-(p/2+y)*m,$=o.math.sin(n.default.angleUnit*v),k=o.math.cos(n.default.angleUnit*v);this.$context.setTransform(-$,k,-k,-$,i,a),this.$context.drawImage(h,u,f,_,p,w,O,b,x),this.$context.setTransform(1,0,0,1,0,0)}fillCircle(t=this.color,e=this.radius){const{x:s,y:i}=this.$coord;this.$context.beginPath(),this.$context.arc(s,i,e,0,o.math.twoPI),this.$context.closePath(),this.$context.fillStyle=t.output?t.output():t,this.$context.fill()}fillEllipse(t=this.color,e=this.innerColor,s=this.radiusX,i=this.radiusY,r=this.face){const{x:a,y:l}=this.$coord;this.$context.beginPath(),this.$context.strokeStyle=t,this.$context.lineWidth=2,this.$context.ellipse(a,l,s,i,r*n.default.angleUnit,0,o.math.twoPI),this.$context.closePath(),this.$context.stroke(),this.$context.fillStyle=e.output?e.output():e,this.$context.fill()}getGradient(t,e,s=this.color,i=this.radius){const{x:n,y:o}=this.$coord,r=this.$context.createRadialGradient(n,o,e,n,o,i);return r.addColorStop(0,t.output?t.output():t),r.addColorStop(1,s.output?s.output():s),r}bezierCurve(...t){if(t.length%6==2){const e=this.$coord.resolve(t[0],t[1]);this.$context.moveTo(e.x,e.y)}for(let e=0;e<t.length;e+=6){const s=this.$coord.resolve(t[e],t[e+1]),i=this.$coord.resolve(t[e+2],t[e+3]),n=this.$coord.resolve(t[e+4],t[e+5]);this.$context.bezierCurveTo(s.x,s.y,i.x,i.y,n.x,n.y)}}quadraticCurve(...t){if(t.length%4==2){const e=this.$coord.resolve(t[0],t[1]);this.$context.moveTo(e.x,e.y)}for(let e=0;e<t.length;e+=4){const s=this.$coord.resolve(t[e],t[e+1]),i=this.$coord.resolve(t[e+2],t[e+3]);this.$context.quadraticCurveTo(s.x,s.y,i.x,i.y)}}toJSON(){const t={};for(const e in this)("string"==typeof e&&"$"!==e[0]&&"_"!==e[0]||"$tick"===e)&&(t[e]=this[e]);return t}}},function(t,e,s){"use strict";function i(t){for(var s in t)e.hasOwnProperty(s)||(e[s]=t[s])}var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=n(s(0));e.assets=o.default;const r=n(s(9));e.builtin=r.default;const a=n(s(1));e.config=a.default;const l=n(s(10));e.Barrage=l.default;const h=n(s(11));e.Bullet=h.default;const u=n(s(5));e.Coordinate=u.default;const c=n(s(16));e.Field=c.default;const f=n(s(12));e.Looping=f.default;const d=n(s(13));e.Player=d.default;const _=n(s(3));e.CanvasPoint=_.default;const p=n(s(6));e.Updater=p.default,i(s(0)),i(s(10)),i(s(11)),i(s(5)),i(s(16)),i(s(12)),i(s(13)),i(s(30)),i(s(3)),i(s(9)),i(s(6))},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(2),o=i(s(1));class r{constructor(t,e,s){this.x=t,this.y=e,this.face=s}get face(){return this._face}set face(t){this._face=t||0,this._cos=n.math.cos(o.default.angleUnit*t||0),this._sin=n.math.sin(o.default.angleUnit*t||0)}get rho(){return this._rho?this._rho:this._rho=n.math.sqrt(this.x**2+this.y**2)}get theta(){return this._thetaRadian/o.default.angleUnit}get thetaRadian(){return"number"==typeof this._thetaRadian?this._thetaRadian:this._thetaRadian=n.math.atan2(this.y,this.x)}dist2(t){return(this.x-t.x)**2+(this.y-t.y)**2}resolve(...t){let e,s,i;return"object"==typeof t[0]?(e=t[0].x,s=t[0].y,i=t[0].face):[e,s,i=0]=t,new r(this.x+e*this._cos-s*this._sin,this.y+e*this._sin+s*this._cos,this.face+i)}locate(...t){let e,s,i;"object"==typeof t[0]?(e=t[0].x,s=t[0].y,i=t[0].face):[e,s,i=0]=t;const n=e-this.x,o=s-this.y;return new r(n*this._cos+o*this._sin,o*this._cos-n*this._sin,i-this.face)}}e.default=r},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(s(0)),o=i(s(1));class r{constructor(){this.$assets=n.default,this.$config=o.default,this.$tick=0,Object.defineProperty(this,"__updater__",{value:{tasks:[],currentTask:null,tasksToRemove:new Set,taskIndex:0}})}initialize(t,e){return this.$context=t,this.$parent=e,this._mounted&&this._mounted(),this}update(){this.$tick+=1;const t=this.__updater__;t.tasks=t.tasks.filter(e=>!t.tasksToRemove.has(e.id));const e=t.tasks;if(t.tasksToRemove.clear(),e.forEach(e=>{t.currentTask=e.id,e.callback.call(this,this.$tick),e.preserve||t.tasksToRemove.add(e.id)}),t.tasks.length>r.scheduleLimit)throw new Error(`The amount of scheduled tasks (${t.tasks.length}) is beyond the limit!`)}setTask(t,e=1/0,s=!0){const i=++this.__updater__.taskIndex;return this.__updater__.tasks.splice(e,0,{callback:t,preserve:s,id:i}),i}setTimeout(t,e){return t+=this.$tick,this.setTask(()=>{this.$tick<=t||(e.call(this,this.$tick),this.removeTask())},0)}setInterval(t,...e){if(t<=0)throw new Error(`The interval ${t} should be positive.`);const s=e.length>1?e[0]:1/0,i=e.length>2?e[1]:0,n=e[e.length-1],o=this.$tick+i;return this.setTask(e=>{e-=o;const i=Math.floor(e/t),r=i*t-e;if(i>0&&r>=0&&r<t&&(n.call(this,this.$tick),i>=s))return this.removeTask()},0)}removeTask(t=this.__updater__.currentTask){t&&this.__updater__.tasksToRemove.add(t)}}r.scheduleLimit=256,e.default=r},function(t,e,s){"use strict";function i(t,s=256/t,i=1){const n=s/i;return(i,o,r,a,l)=>{const h={};return e.colorSeries[s].forEach((e,s)=>{const u=r+s*t,c=a+Math.floor(s/n)*t;h[`${i}?color=${e}`]={judgeRadius:o,transform:l,selector:[u,c,u+t,c+t]}}),h}}Object.defineProperty(e,"__esModule",{value:!0}),e.colorSeries={4:["red","blue","green","yellow"],8:["black","red","magenta","blue","cyan","green","yellow","gray"],16:["black","maroon","red","purple","magenta","darkblue","blue","","cyan","","green","yellowgreen","","yellow","orange","gray"]},e.defineBullet=i,e.bullet8x32p=i(32),e.bullet4x64p=i(64),e.bullet16x16p=i(16),e.bullet16x8p=i(8,16,2)},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(s(31)),o=i(s(32)),r=i(s(33)),a=i(s(34)),l=i(s(35)),h=i(s(36)),u=i(s(37)),c=i(s(38));var f=s(7);e.colorSeries=f.colorSeries,e.touhou={v2_1:h.default,v2_2:u.default,v2_3:c.default},e.default=function(t){t.defineTemplate({flaming:n.default,large:o.default,medium:r.default,small:a.default,ellipse:l.default})}},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(14),o=s(0),r=i(s(26)),a=i(s(27)),l={},h=r.default,u=a.default;function c(...t){if("string"==typeof t[0]){const e=/^([\w_$]+)(?:\?(.+))?$/.exec(t[0]);if(!e)throw new Error(`Invalid form: "${t[0]}".`);const s=e[1],i=t[0],o=n.parse(e[2]),r=Object.keys(o).length;l[s]=l[s]||[];let a=0,h=null;for(;a<l[s].length;a+=1){const t=l[s][a];if(t.query===i)break;if(t.weight<=r&&(null===h&&(h=a),t.weight<r))break}l[s][a]&&l[s][a].query===i?Object.assign(l[s][a],t[1]):l[s].splice(null===h?1/0:h,0,{query:i,weight:r,...t[1],test(t){for(const e in o)if(t[e]!=o[e])return!1;return!0}})}else for(const e in t[0])c(e,t[0][e])}e.default={templates:l,fields:h,judges:u},e.defineTemplate=c,e.buildFromImages=function(t,e){o.checkImages(t);for(const s in e){let{selector:i,judgeRadius:n,transform:[o=!1,r=1,a=0,l=0]=[]}=e[s];Array.isArray(i)&&(i={data:[i]});const h=i.interval||1,u=i.data,f=o?void 0:0;c(s,{applied(){this.judgeRadius=n},display(e){const[s,i,n,o]=u[Math.floor(e/h)%u.length];this.drawImage(t,{rotate:f,scale:r,xOffset:a,yOffset:l},{xStart:s,yStart:i,xEnd:n,yEnd:o})}})}}},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(s(11)),o=i(s(3)),r=i(s(6));class a extends r.default{constructor(t={}){super(),this._pointCounter=0,this.$refs={},this.$bullets=[],this._mutateHook=t.mutate,this._mountedHook=t.mounted,this._references=t.reference||{},Object.assign(this,t.methods);const e="function"==typeof t.state?t.state.call(this):t.state;Object.assign(this,e)}_mounted(){this.$refs={},this._mountedHook&&this._mountedHook(),this._mutateHook&&this.setTask(this._mutateHook);for(const t of Object.keys(this._references))this.setRefPoint(t,this._references[t]);this.setTask(()=>{for(const t in this.$refs){const e=this.$refs[t];e.$parent===this&&e.update()}if(this.$bullets.forEach(t=>t.update()),this.$bullets.length>a.maxBulletCount)throw new Error(`The amount of bullets ${this.$bullets.length} is beyond the limit!`)})}render(){for(const t in this.$refs){const e=this.$refs[t];e.$parent===this&&e.render()}this.$bullets.forEach(t=>t.render())}setRefPoint(...t){const e=t[t.length-1],s=t.length>1?t[0]:++this._pointCounter;return this.$refs[s]=new o.default(e).initialize(this.$context,this),s}removeRefPoint(t){return delete this.$refs[t]}emitBullets(...t){const e=t.length>2?t[0]:0,s=t.length>1?t.length>2?t[1]:t[0]:1,i=t.length>3?t[2]:1,o=t[t.length-1];for(let t=e;t<s;t+=i){const e="function"==typeof o?o.call(this,t):o,s=new n.default(e);s.$id=++this._pointCounter;for(const t in this.$refs)s.$refs[t]=this.$refs[t].$coord;s.initialize(this.$context,this);const i=this.$bullets.findIndex(({layer:t})=>t>s.layer);i<0?this.$bullets.push(s):this.$bullets.splice(i,0,s)}}}a.maxBulletCount=4096,e.default=a},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(s(1)),o=i(s(9)),r=s(2),a=i(s(5)),l=i(s(3));class h extends l.default{constructor(t={}){const e=t.display;delete t.display,super(t),this.$refs={},this.layer=void 0===t.layer?0:t.layer,this.judgeType=void 0===t.judgeType?"ortho":t.judgeType,this.fieldType=void 0===t.fieldType?"viewport":t.fieldType,this.setTask(t=>{const e=this._resolveHook(this.judgeType,o.default.judges),s=this.$parent.$refs.player;e&&s&&e.call(this,s)&&this.hitPlayer();const i=this._resolveHook(this.fieldType,o.default.fields);i&&i.call(this,t)&&this.destroy()});const s=t.origin||"origin";"string"!=typeof s?this.$origin=s:this._mountedHook.unshift(()=>{this.$refs[s]?this.$origin=this.$refs[s]:(n.default.showWarning&&console.warn(`Warning: reference point ${s} is not found.`),this.$origin={x:0,y:0,face:0})}),this.display=e}set display(t){if("string"==typeof t){const e=(o.default.templates[t]||[]).find(t=>t.test(this));if(!e)throw new Error(`A template matching ${t} was not found.`);e.applied&&e.applied.call(this),this._displayHook=e.display}else this._displayHook=t}get display(){return this._displayHook}_resolveHook(t,e){if("string"!=typeof t)return t;if(t in e)return e[t];throw new Error(`Plugin ${t} was not found.`)}get $coord(){return this._coordinate&&this.$tick===this._coordinate.$birth||(this._coordinate=new a.default(this.x+this.$origin.x,this.y+this.$origin.y,this.face+this.$origin.face),this._coordinate.$birth=this.$tick),this._coordinate}polarLocate(t=this.rho,e=this.theta){e+=this.$origin.face,this.x=t*r.math.cos(n.default.angleUnit*e),this.y=t*r.math.sin(n.default.angleUnit*e)}hitPlayer(){this.$parent.$refs.player.lifeCount-=1,this.destroy()}destroy(){const t=this.$id;this.$parent.setTimeout(0,function(){const e=this.$bullets.findIndex(e=>e.$id===t);e>=0&&this.$bullets.splice(e,1)})}}e.default=h,Object.assign(h,o.default)},function(t,e,s){"use strict";function i(){}Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t={}){this.initialize(t)}initialize(t={}){"__loop__"in this&&(t=Object.assign(this.__loop__.options,t));const e={options:t,frameId:null,frameCount:0,lastFrame:null,totalStop:0,lastStop:null,recentData:[],timeLine:null,lastModifyStats:0,skipRate:1+(t.skipFrame||0),tickLength:1e3/(t.tickRate||60),tickStorage:t.tickStorage||60,statsInterval:t.statsInterval||1/0,maxInterpolation:t.maxInterpolation||5};return e.sampleTime=e.tickLength*e.tickStorage,Object.defineProperty(this,"__loop__",{value:e}),this.onPause=t.onPause||this.onPause||i,this.onResume=t.onResume||this.onResume||i,this.onStats=t.onStats||this.onStats||i,this.onError=t.onError||this.onError||i,this}pause(){this.__loop__.frameId&&(this.__loop__.lastStop=performance.now(),cancelAnimationFrame(this.__loop__.frameId),this.__loop__.frameId=null,this.onPause())}resume(){if(!this.__loop__.frameId){if(this.__loop__.lastStop){const t=performance.now()-this.__loop__.lastStop;this.__loop__.totalStop+=t,this.__loop__.lastFrame&&(this.__loop__.lastFrame+=t)}this.__loop__.frameId=requestAnimationFrame(t=>this._render(t)),this.onResume()}}toggle(){null!==this.__loop__.frameId?this.pause():this.resume()}getStatus(){const{recentData:t}=this.__loop__;if(!t.length)return null;let e=0,s=0,i=0;for(const n of t)e+=n.time,s+=n.ticks,i+=Number(1!==n.ticks);return{tickRate:1e3/e*s,frameRate:1e3/e*t.length,dropRate:i/t.length}}_render(t){const e=this.__loop__;let s=(t-e.totalStop-e.timeLine)/e.tickLength;(s=s<1?Math.round(s):Math.floor(s))>e.maxInterpolation?(s=e.maxInterpolation,e.timeLine=t-e.totalStop):e.timeLine+=s*e.tickLength;const i=t-(e.lastFrame||0);e.lastFrame&&(e.recentData.unshift({time:i,ticks:s}),e.recentData=e.recentData.slice(0,e.tickStorage)),e.lastFrame=t;try{for(let t=0;t<s;t+=1)this.update();s&&(e.frameCount%e.skipRate==0&&this.render(),e.frameCount+=1)}catch(t){return console.error(t),this.onError(t),void this.pause()}e.frameId=requestAnimationFrame(t=>this._render(t));const n=performance.now();if(n-e.lastModifyStats<e.statsInterval)return;e.lastModifyStats=n;const o=this.getStatus();o&&this.onStats(o)}}},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(s(3));e.default=class extends n.default{constructor(t={}){t.state={color:"red",radius:4,lifeCount:8,judgeRadius:2.5,bombCount:0,highSpeed:5,lowSpeed:2,...t.state},super(t),this._listeners=[],this.control=void 0===t.control?"keyboard":t.control}_mounted(){this.x=this.$context.canvas.width/2,this.y=this.$context.canvas.height/8*7,this._mountedHook.forEach(t=>t.call(this)),this.render(),this.setTask(this._mutate),"mouse"===this.control?(this._mouseState={x:0,y:0},this._listen(this.$context.canvas,"mousemove",t=>{this._mouseState.x=t.clientX/this.$context.canvas.offsetWidth*this.$context.canvas.width,this._mouseState.y=t.clientY/this.$context.canvas.offsetHeight*this.$context.canvas.height,t.preventDefault(),t.stopPropagation()})):"keyboard"===this.control&&(this._keyState={ArrowUp:0,ArrowDown:0,ArrowLeft:0,ArrowRight:0,Shift:0},this._listen(window,"keydown",t=>{t.key in this._keyState&&(this._keyState[t.key]=1,t.preventDefault(),t.stopPropagation())}),this._listen(window,"keyup",t=>{t.key in this._keyState&&(this._keyState[t.key]=0,t.preventDefault(),t.stopPropagation())}))}_listen(t,e,s,i){t.addEventListener(e,s,i),this._listeners.push([t,e,s,i])}_mutate(t){if(this._mutateHook.forEach(e=>e.call(this,t)),"mouse"===this.control)this.x=this._mouseState.x,this.y=this._mouseState.y;else if("keyboard"===this.control){const t=(this._keyState.Shift?this.lowSpeed:this.highSpeed)/Math.sqrt((this._keyState.ArrowDown^this._keyState.ArrowUp)+(this._keyState.ArrowLeft^this._keyState.ArrowRight)||1);this.x+=t*this._keyState.ArrowRight,this.x-=t*this._keyState.ArrowLeft,this.y+=t*this._keyState.ArrowDown,this.y-=t*this._keyState.ArrowUp,this.x<0&&(this.x=0),this.y<0&&(this.y=0),this.x>this.$context.canvas.width&&(this.x=this.$context.canvas.width),this.y>this.$context.canvas.height&&(this.y=this.$context.canvas.height)}}render(){const t=this.getGradient("white",this.radius/2);this.fillCircle(t)}destory(){this._listeners.forEach(([t,e,s,i])=>{t.removeEventListener(e,s,i)})}}},function(t,e,s){"use strict";e.decode=e.parse=s(24),e.encode=e.stringify=s(25)},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){let e=1,s=0,i=0;const n={},o={};function r(t){if(delete n[t],t===e)for(;!n.hasOwnProperty(++e);)continue}return(...a)=>{const l=function(t){let e=t.length-1,s=String(t[e]);for(;--e>=0;)s+=""+t[e];return s}(a.slice(0,t.length)),h=o[l],u=++i;if(n[u]=l,h)return r(h.index),h.index=u,h.value;{const i=t(...a);return o[l]={index:u,value:i},(s+=1)<=1024?i:(delete o[n[e]],s-=1,r(e),i)}}}},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(0),o=i(s(12)),r=i(s(10)),a=i(s(13));e.default=class extends o.default{constructor(t,e={}){super(e),this.element=t,t.classList.add("stg-field"),t.style.background=e.background,this.canvas=t.appendChild(document.createElement("canvas")),this.canvas.height=e.height||560,this.canvas.width=e.width||480,this.title=e.title||"",this.context=this.canvas.getContext("2d"),this.setTitleStyle(e.titleStyle)}setTitleStyle(t={}){const e=t.fontSize||24;this.titleStyle={fontSize:e,fontColor:"white",x:this.canvas.width-e,y:e,textAlign:"right",textBaseline:"top",fontFamily:'Calibri, Candara, Segoe, "Segoe UI", Optima, Arial',...t}}async setPlayer(t){t&&(this.removePlayer(),await n.loadAssets(t.assets),this.player=new a.default(t).initialize(this.context),this.barrage&&(this.barrage.$refs.player=this.player))}removePlayer(){this.player&&this.player.destory(),this.barrage&&delete this.barrage.$refs.player}async setBarrage(t){t&&(this.pause(),this.clearScreen(),await n.loadAssets(t.assets),this.barrage=new r.default(t).initialize(this.context),this.player&&(this.barrage.$refs.player=this.player))}clearScreen(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}clear(){this.pause(),this.removePlayer(),this.clearScreen(),this.barrage=null}update(){this.barrage&&this.barrage.update(),this.player&&this.player.update()}render(){this.clearScreen(),this.barrage&&this.barrage.render(),this.player&&this.player.render(),this.showTitle()}showText(t,e){this.context.textAlign=e.textAlign,this.context.textBaseline=e.textBaseline,this.context.fillStyle=e.fontColor,this.context.font=`${e.fontSize||16}px ${e.fontFamily}`,this.context.fillText(t,e.x,e.y)}showTitle(){const t=this.title&&this.titleStyle;t&&this.showText(this.title,t)}}},function(t){t.exports={a:"0.3.1"}},function(t,e,s){"use strict";s.r(e);var i=s(4),n=s(8),o=s.n(n);for(var r in i)["version","default"].indexOf(r)<0&&function(t){s.d(e,t,function(){return i[t]})}(r);var a=s(2);for(var r in a)["version","default"].indexOf(r)<0&&function(t){s.d(e,t,function(){return a[t]})}(r);for(var r in n)["version","default"].indexOf(r)<0&&function(t){s.d(e,t,function(){return n[t]})}(r);var l=s(17);s.d(e,"version",function(){return l.a}),Object(i.use)(o.a)},function(t,e,s){"use strict";var i=s(20),n=s(23);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=v,e.resolve=function(t,e){return v(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?v(t,!1,!0).resolveObject(e):e},e.format=function(t){return n.isString(t)&&(t=v(t)),t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var r=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(h),c=["%","/","?",";","#"].concat(u),f=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=s(14);function v(t,e,s){if(t&&n.isObject(t)&&t instanceof o)return t;var i=new o;return i.parse(t,e,s),i}o.prototype.parse=function(t,e,s){if(!n.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",h=t.split(a);h[0]=h[0].replace(/\\/g,"/");var v=t=h.join(a);if(v=v.trim(),!s&&1===t.split("#").length){var b=l.exec(v);if(b)return this.path=v,this.href=v,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=r.exec(v);if(x){var w=(x=x[0]).toLowerCase();this.protocol=w,v=v.substr(x.length)}if(s||x||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var O="//"===v.substr(0,2);!O||x&&m[x]||(v=v.substr(2),this.slashes=!0)}if(!m[x]&&(O||x&&!g[x])){for(var $,k,P=-1,E=0;E<f.length;E++)-1!==(M=v.indexOf(f[E]))&&(-1===P||M<P)&&(P=M);for(-1!==(k=-1===P?v.lastIndexOf("@"):v.lastIndexOf("@",P))&&($=v.slice(0,k),v=v.slice(k+1),this.auth=decodeURIComponent($)),P=-1,E=0;E<c.length;E++){var M;-1!==(M=v.indexOf(c[E]))&&(-1===P||M<P)&&(P=M)}-1===P&&(P=v.length),this.host=v.slice(0,P),v=v.slice(P),this.parseHost(),this.hostname=this.hostname||"";var j="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!j)for(var C=this.hostname.split(/\./),R=(E=0,C.length);E<R;E++){var I=C[E];if(I&&!I.match(d)){for(var S="",T=0,D=I.length;T<D;T++)I.charCodeAt(T)>127?S+="x":S+=I[T];if(!S.match(d)){var A=C.slice(0,E),U=C.slice(E+1),L=I.match(_);L&&(A.push(L[1]),U.unshift(L[2])),U.length&&(v="/"+U.join(".")+v),this.hostname=A.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),j||(this.hostname=i.toASCII(this.hostname));var B=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+B,this.href+=this.host,j&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!p[w])for(E=0,R=u.length;E<R;E++){var W=u[E];if(-1!==v.indexOf(W)){var K=encodeURIComponent(W);K===W&&(K=escape(W)),v=v.split(W).join(K)}}var F=v.indexOf("#");-1!==F&&(this.hash=v.substr(F),v=v.slice(0,F));var H=v.indexOf("?");if(-1!==H?(this.search=v.substr(H),this.query=v.substr(H+1),e&&(this.query=y.parse(this.query)),v=v.slice(0,H)):e&&(this.search="",this.query={}),v&&(this.pathname=v),g[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var N=this.search||"";this.path=B+N}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",s=this.pathname||"",i=this.hash||"",o=!1,r="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(r=y.stringify(this.query));var a=this.search||r&&"?"+r||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||g[e])&&!1!==o?(o="//"+(o||""),s&&"/"!==s.charAt(0)&&(s="/"+s)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(s=s.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+i},o.prototype.resolve=function(t){return this.resolveObject(v(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(n.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var s=new o,i=Object.keys(this),r=0;r<i.length;r++){var a=i[r];s[a]=this[a]}if(s.hash=t.hash,""===t.href)return s.href=s.format(),s;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),h=0;h<l.length;h++){var u=l[h];"protocol"!==u&&(s[u]=t[u])}return g[s.protocol]&&s.hostname&&!s.pathname&&(s.path=s.pathname="/"),s.href=s.format(),s}if(t.protocol&&t.protocol!==s.protocol){if(!g[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var d=c[f];s[d]=t[d]}return s.href=s.format(),s}if(s.protocol=t.protocol,t.host||m[t.protocol])s.pathname=t.pathname;else{for(var _=(t.pathname||"").split("/");_.length&&!(t.host=_.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==_[0]&&_.unshift(""),_.length<2&&_.unshift(""),s.pathname=_.join("/")}if(s.search=t.search,s.query=t.query,s.host=t.host||"",s.auth=t.auth,s.hostname=t.hostname||t.host,s.port=t.port,s.pathname||s.search){var p=s.pathname||"",y=s.search||"";s.path=p+y}return s.slashes=s.slashes||t.slashes,s.href=s.format(),s}var v=s.pathname&&"/"===s.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=b||v||s.host&&t.pathname,w=x,O=s.pathname&&s.pathname.split("/")||[],$=(_=t.pathname&&t.pathname.split("/")||[],s.protocol&&!g[s.protocol]);if($&&(s.hostname="",s.port=null,s.host&&(""===O[0]?O[0]=s.host:O.unshift(s.host)),s.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===_[0]?_[0]=t.host:_.unshift(t.host)),t.host=null),x=x&&(""===_[0]||""===O[0])),b)s.host=t.host||""===t.host?t.host:s.host,s.hostname=t.hostname||""===t.hostname?t.hostname:s.hostname,s.search=t.search,s.query=t.query,O=_;else if(_.length)O||(O=[]),O.pop(),O=O.concat(_),s.search=t.search,s.query=t.query;else if(!n.isNullOrUndefined(t.search))return $&&(s.hostname=s.host=O.shift(),(j=!!(s.host&&s.host.indexOf("@")>0)&&s.host.split("@"))&&(s.auth=j.shift(),s.host=s.hostname=j.shift())),s.search=t.search,s.query=t.query,n.isNull(s.pathname)&&n.isNull(s.search)||(s.path=(s.pathname?s.pathname:"")+(s.search?s.search:"")),s.href=s.format(),s;if(!O.length)return s.pathname=null,s.search?s.path="/"+s.search:s.path=null,s.href=s.format(),s;for(var k=O.slice(-1)[0],P=(s.host||t.host||O.length>1)&&("."===k||".."===k)||""===k,E=0,M=O.length;M>=0;M--)"."===(k=O[M])?O.splice(M,1):".."===k?(O.splice(M,1),E++):E&&(O.splice(M,1),E--);if(!x&&!w)for(;E--;E)O.unshift("..");!x||""===O[0]||O[0]&&"/"===O[0].charAt(0)||O.unshift(""),P&&"/"!==O.join("/").substr(-1)&&O.push("");var j,C=""===O[0]||O[0]&&"/"===O[0].charAt(0);return $&&(s.hostname=s.host=C?"":O.length?O.shift():"",(j=!!(s.host&&s.host.indexOf("@")>0)&&s.host.split("@"))&&(s.auth=j.shift(),s.host=s.hostname=j.shift())),(x=x||s.host&&O.length)&&!C&&O.unshift(""),O.length?s.pathname=O.join("/"):(s.pathname=null,s.path=null),n.isNull(s.pathname)&&n.isNull(s.search)||(s.path=(s.pathname?s.pathname:"")+(s.search?s.search:"")),s.auth=t.auth||s.auth,s.slashes=s.slashes||t.slashes,s.href=s.format(),s},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,s){(function(t,i){var n;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var r="object"==typeof i&&i;r.global!==r&&r.window!==r&&r.self;var a,l=2147483647,h=36,u=1,c=26,f=38,d=700,_=72,p=128,m="-",g=/^xn--/,y=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=h-u,w=Math.floor,O=String.fromCharCode;function $(t){throw new RangeError(b[t])}function k(t,e){for(var s=t.length,i=[];s--;)i[s]=e(t[s]);return i}function P(t,e){var s=t.split("@"),i="";return s.length>1&&(i=s[0]+"@",t=s[1]),i+k((t=t.replace(v,".")).split("."),e).join(".")}function E(t){for(var e,s,i=[],n=0,o=t.length;n<o;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<o?56320==(64512&(s=t.charCodeAt(n++)))?i.push(((1023&e)<<10)+(1023&s)+65536):(i.push(e),n--):i.push(e);return i}function M(t){return k(t,function(t){var e="";return t>65535&&(e+=O((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+O(t)}).join("")}function j(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function C(t,e,s){var i=0;for(t=s?w(t/d):t>>1,t+=w(t/e);t>x*c>>1;i+=h)t=w(t/x);return w(i+(x+1)*t/(t+f))}function R(t){var e,s,i,n,o,r,a,f,d,g,y,v=[],b=t.length,x=0,O=p,k=_;for((s=t.lastIndexOf(m))<0&&(s=0),i=0;i<s;++i)t.charCodeAt(i)>=128&&$("not-basic"),v.push(t.charCodeAt(i));for(n=s>0?s+1:0;n<b;){for(o=x,r=1,a=h;n>=b&&$("invalid-input"),((f=(y=t.charCodeAt(n++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:h)>=h||f>w((l-x)/r))&&$("overflow"),x+=f*r,!(f<(d=a<=k?u:a>=k+c?c:a-k));a+=h)r>w(l/(g=h-d))&&$("overflow"),r*=g;k=C(x-o,e=v.length+1,0==o),w(x/e)>l-O&&$("overflow"),O+=w(x/e),x%=e,v.splice(x++,0,O)}return M(v)}function I(t){var e,s,i,n,o,r,a,f,d,g,y,v,b,x,k,P=[];for(v=(t=E(t)).length,e=p,s=0,o=_,r=0;r<v;++r)(y=t[r])<128&&P.push(O(y));for(i=n=P.length,n&&P.push(m);i<v;){for(a=l,r=0;r<v;++r)(y=t[r])>=e&&y<a&&(a=y);for(a-e>w((l-s)/(b=i+1))&&$("overflow"),s+=(a-e)*b,e=a,r=0;r<v;++r)if((y=t[r])<e&&++s>l&&$("overflow"),y==e){for(f=s,d=h;!(f<(g=d<=o?u:d>=o+c?c:d-o));d+=h)k=f-g,x=h-g,P.push(O(j(g+k%x,0))),f=w(k/x);P.push(O(j(f,0))),o=C(s,b,i==n),s=0,++i}++s,++e}return P.join("")}a={version:"1.4.1",ucs2:{decode:E,encode:M},decode:R,encode:I,toASCII:function(t){return P(t,function(t){return y.test(t)?"xn--"+I(t):t})},toUnicode:function(t){return P(t,function(t){return g.test(t)?R(t.slice(4).toLowerCase()):t})}},void 0===(n=function(){return a}.call(e,s,e,t))||(t.exports=n)}()}).call(this,s(21)(t),s(22))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(t){"object"==typeof window&&(s=window)}t.exports=s},function(t,e,s){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,s){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,s,o){e=e||"&",s=s||"=";var r={};if("string"!=typeof t||0===t.length)return r;var a=/\+/g;t=t.split(e);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var h=t.length;l>0&&h>l&&(h=l);for(var u=0;u<h;++u){var c,f,d,_,p=t[u].replace(a,"%20"),m=p.indexOf(s);m>=0?(c=p.substr(0,m),f=p.substr(m+1)):(c=p,f=""),d=decodeURIComponent(c),_=decodeURIComponent(f),i(r,d)?n(r[d])?r[d].push(_):r[d]=[r[d],_]:r[d]=_}return r};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,s){"use strict";var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,s,a){return e=e||"&",s=s||"=",null===t&&(t=void 0),"object"==typeof t?o(r(t),function(r){var a=encodeURIComponent(i(r))+s;return n(t[r])?o(t[r],function(t){return a+encodeURIComponent(i(t))}).join(e):a+encodeURIComponent(i(t[r]))}).join(e):a?encodeURIComponent(i(a))+s+encodeURIComponent(i(t)):""};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var s=[],i=0;i<t.length;i++)s.push(e(t[i],i));return s}var r=Object.keys||function(t){var e=[];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.push(s);return e}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={distant(){const{width:t,height:e}=this.$context.canvas;return this.x**2+this.y**2>t**2+e**2},timing(t){return t>(this.lifeSpan||12e3)},viewport(){const{x:t,y:e}=this.$coord,{width:s,height:i}=this.$context.canvas,n=this.fieldBorder||10;return e<-n||e>i+n||t<-n||t>s+n}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={ortho(t){return this.$coord.dist2(t)<t.judgeRadius**2+this.judgeRadius**2},square(t){const e=t.judgeRadius+this.judgeRadius,s=this.$coord.locate(t.x,t.y);return Math.abs(s.x)<e||Math.abs(s.y)<e},viewport(t){const e=t.judgeRadius+this.judgeRadius;return this.$coord.dist2(t)<e**2}}},function(t,e,s){"use strict";function i(){return 2*Math.floor(2*Math.random())-1}function n(...t){const e=t.length>1?t[0]:0,s=t[t.length-1];return Math.random()*(s-e)+e}function o(...t){let e=Math.random()*t.reduce((t,e)=>t+e,0);for(let s=0;s<t.length;s+=1)if((e-=t[s])<0)return s}Object.defineProperty(e,"__esModule",{value:!0}),e.pm1=i,e.real=n,e.int=function(...t){return Math.floor(n(...t))},e.choose=o,e.transfer=function(t,e,s,r,a){return t<e+r?t+n(r,a):t>s-r?t-n(r,a):t<e+a?o(t-e-r,a-r)?t+n(r,a):t-n(r,t-e-r):t>s-a?o(s-t-r,a-r)?t-n(r,a):t+n(r,s-t-r):t+n(r,a)*i()}},function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(s(15)),o={},r=["sqrt","cbrt","exp","log","log2","log10","sin","cos","tan","asin","acos","atan","sinh","cosh","tanh","asinh","acosh","atanh"];Object.defineProperty(o,"twoPI",{value:2*Math.PI}),Object.defineProperty(o,"halfPI",{value:Math.PI/2}),Object.getOwnPropertyNames(Math).forEach(t=>{Object.defineProperty(o,t,{value:r.includes(t)?n.default(Math[t]):Math[t]})}),e.default=o},function(t,e,s){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const n=i(s(4));e.use=function(t){if("function"==typeof t)t(n);else{if("function"!=typeof t.install)throw new Error("Not a valid plugin.");t.install(n)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={applied(){this.radius=6,this.innerRadius=4,this.judgeRadius=4,this.color=this.color||"blue",this.innerColor=this.innerColor||"white"},display(){this.fillCircle(this.getGradient(this.color,this.innerR,this.bdColor))}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={applied(){this.radius=20,this.innerRadius=14,this.judgeRadius=8.5,this.color=this.color||"blue",this.innerColor=this.innerColor||"white"},display(){this.fillCircle(this.getGradient(this.innerColor,this.innerRadius))}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={applied(){this.radius=14,this.innerRadius=8.5,this.judgeRadius=9,this.color=this.color||"blue",this.innerColor=this.innerColor||"white"},display(){this.fillCircle(this.getGradient(this.innerColor,this.innerRadius))}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={applied(){this.radius=6,this.innerRadius=4,this.judgeRadius=4,this.color=this.color||"blue",this.innerColor=this.innerColor||"white"},display(){this.fillCircle(this.getGradient(this.innerColor,this.innerRadius))}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={applied(){this.radiusX=14,this.radiusY=7,this.judgeRadius=7,this.color=this.color||"blue",this.innerColor=this.innerColor||"white"},display(){this.fillEllipse()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(7);e.default={...i.bullet16x16p("scale",2.4,0,16,[!0,1,0,3]),...i.bullet16x16p("ring",4,0,32),...i.bullet16x16p("small",4,0,48),...i.bullet16x16p("rice",2.4,0,64,[!0]),...i.bullet16x16p("chain",2.4,0,80,[!0]),...i.bullet16x16p("needle",2.4,0,96,[!0]),...i.bullet16x16p("shell",2.8,0,112,[!0]),...i.bullet16x16p("bullet",2.4,0,128,[!0]),...i.bullet16x16p("bacillus",2.4,0,144,[!0]),...i.bullet16x16p("star",4,0,160,[!0]),...i.bullet16x16p("unknown1",4,0,176),...i.bullet16x8p("grape",2.4,0,192),...i.bullet16x8p("grain",2.4,64,192,[!0]),...i.bullet16x8p("point",2.4,0,240)}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(7);e.default={...i.bullet8x32p("bigstar",7,0,0,[!0]),...i.bullet8x32p("medium",8.5,0,32),...i.bullet8x32p("butterfly",7,0,64,[!0]),...i.bullet8x32p("knife",6,0,96,[!0]),...i.bullet8x32p("ellipse",7,0,128,[!0]),...i.bullet8x32p("unknown2",7,0,160),...i.bullet4x64p("large",14,0,192)}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(7);e.default={...i.bullet8x32p("heart",10,0,0,[!0]),...i.bullet8x32p("arrow",4,0,32,[!0,1,0,-3]),...i.bullet8x32p("unknown3",4,0,64),...i.bullet8x32p("unknown4",7,0,224),...i.bullet16x16p("drop",2.4,0,192,[!0,1,0,-4])}}])},60:function(t,e,s){},61:function(t,e,s){},62:function(t,e,s){"use strict";var i=s(35);s.n(i).a},63:function(t,e,s){"use strict";var i={props:{index:Number,value:Number,icon:String}},n=(s(54),s(1)),o={components:{ToolbarTab:Object(n.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["tab",{active:t.value===t.index}],on:{click:function(e){e.stopPropagation(),t.$emit("input",t.index)}}},[t.icon?s("i",{class:"icon-"+t.icon}):t._e(),t._v(" "),t._t("default")],2)},[],!1,null,"8c062d3a",null).exports},props:{value:Number,data:Array}},r=(s(55),Object(n.a)(o,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"toolbar"},[t._l(t.data,function(e,i){return s("ToolbarTab",{key:i,attrs:{value:t.value,index:i,icon:e.icon},on:{input:function(e){t.$emit("input",e)}}},[t._v("\n    "+t._s(e.text)+"\n  ")])}),t._v(" "),s("span",{staticClass:"underline",style:{left:(2*t.value+1)/6*100+"%"}})],2)},[],!1,null,"2c16dbda",null));e.a=r.exports},64:function(t,e,s){"use strict";var i={props:{value:Number,files:Array}},n=(s(56),s(1)),o=Object(n.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"explorer"},t._l(t.files,function(e,i){return s("div",{key:i,class:["item",{active:t.value===i}],domProps:{textContent:t._s(e.exports.title)},on:{click:function(e){e.stopPropagation(),t.$emit("input",i)}}})}),0)},[],!1,null,"6fb64560",null);e.a=o.exports},65:function(t,e,s){"use strict";var i={props:{stats:Object},computed:{tickRate(){return this.stats?this.stats.tickRate.toFixed(1):"--"},frameRate(){return this.stats?this.stats.frameRate.toFixed(1):"--"},dropRate(){return this.stats?Math.floor(100*this.stats.dropRate)+"%":"--"}}},n=(s(57),s(1)),o=Object(n.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"settings"},[s("h3",[t._v("数据统计")]),t._v(" "),s("div",[t._v("逻辑帧率: "+t._s(t.tickRate))]),t._v(" "),s("div",[t._v("物理帧率: "+t._s(t.frameRate))]),t._v(" "),s("div",[t._v("处理落率: "+t._s(t.dropRate))])])},[],!1,null,"e83feb2e",null);e.a=o.exports},66:function(t,e,s){"use strict";var i={props:{value:Number},watch:{value:"updateCode"},mounted(){this.updateCode()},methods:{async updateCode(){await this.$nextTick(),[].forEach.call(this.$el.childNodes,(t,e)=>{this.value===e?t.classList.remove("inactive"):t.classList.add("inactive")})}}},n=(s(53),s(1)),o=Object(n.a)(i,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"code"},[this._t("default")],2)},[],!1,null,"62383ec4",null);e.a=o.exports},69:function(t,e,s){"use strict";s.r(e);var i=s(29).a,n=(s(62),s(1)),o=Object(n.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"stg-demo"},[s("div",{staticClass:"left",style:{width:t.leftWidth+"px"}},[t.multiFile?s("Toolbar",{attrs:{data:t.toolbarData},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}}):t._e(),t._v(" "),s("div",{staticClass:"container"},[s("transition",{attrs:{name:"container","leave-to-class":"transform-to-"+(t.tabMovingToRight?"left":"right"),"enter-class":"transform-to-"+(t.tabMovingToRight?"right":"left")}},[0===t.tabIndex?s("Explorer",{key:"0",attrs:{files:t.files},model:{value:t.fileIndex,callback:function(e){t.fileIndex=e},expression:"fileIndex"}}):1===t.tabIndex?s("Code",{key:"1",attrs:{value:t.fileIndex}},[t._t("default")],2):s("Settings",{key:"2",attrs:{stats:t.stats}})],1)],1)],1),t._v(" "),s("div",{ref:"field",staticClass:"right",style:{width:t.rightWidth+"px"},on:{click:t.toggle}})])},[],!1,null,null,null);e.default=o.exports}}]);