(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{119:function(v,_,e){"use strict";e.r(_);var t=e(2),r=Object(t.a)({},function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("h1",{attrs:{id:"更新日志"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新日志","aria-hidden":"true"}},[v._v("#")]),v._v(" 更新日志")]),v._v(" "),e("h2",{attrs:{id:"v0-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v0-4","aria-hidden":"true"}},[v._v("#")]),v._v(" v0.4")]),v._v(" "),e("h3",{attrs:{id:"新特性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新特性","aria-hidden":"true"}},[v._v("#")]),v._v(" 新特性")]),v._v(" "),e("ul",[e("li",[e("strong",[v._v("core:")]),v._v(" 实现了擦弹效果:\n"),e("ul",[e("li",[v._v("PlayerOptions 新增 "),e("code",[v._v("grazeRadius")]),v._v(" 属性, 用于控制擦弹判定半径.")]),v._v(" "),e("li",[v._v("config 新增 "),e("code",[v._v("grazeFilter")]),v._v(" 属性, 用于控制擦弹对应的滤镜效果.")])])]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" 重新实现了弹雾效果:\n"),e("ul",[e("li",[v._v("BulletAsset 新增 "),e("code",[v._v("fogEffect")]),v._v(" 属性, 用于制定弹雾效果对应的弹型.")]),v._v(" "),e("li",[v._v("config 新增 "),e("code",[v._v("fogEffectTimeout")]),v._v(" 属性, 用于控制子弹生成时弹雾效果的持续帧数.")])])]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" 实现了自机动画:\n"),e("ul",[e("li",[v._v("通过 "),e("code",[v._v("stg.buildEmitter")]),v._v(" 方法可以从文件生成一个自机 (敌机) 模板.")]),v._v(" "),e("li",[v._v("将 PlayerOptions 的 "),e("code",[v._v("display")]),v._v(" 钩子设定为对应的模板名称即可实现自机动画.")])])]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" PointOptions 和 PointTemplate 的 "),e("code",[v._v("display")]),v._v(" 钩子新增了参数 "),e("code",[v._v("displayTick")]),v._v(", 表示该钩子函数从被绑定到调用时经过的逻辑帧数.")]),v._v(" "),e("li",[e("strong",[v._v("touhou:")]),v._v(" 增加了官方插件 "),e("code",[v._v("touhou.th15")]),v._v(", 使用 "),e("code",[v._v("stg.use")]),v._v(" 函数并提供资源即可加载东方绀珠传的部分子弹和自机数据.")])]),v._v(" "),e("h3",{attrs:{id:"重大变化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重大变化","aria-hidden":"true"}},[v._v("#")]),v._v(" 重大变化")]),v._v(" "),e("ul",[e("li",[e("strong",[v._v("core:")]),v._v(" 重写了 template 模块. 现在的 fieldType, judgeType 以及 display 钩子都可以通过 template 模块进行控制了. 新增了三个全局函数 "),e("code",[v._v("defineTemplate")]),v._v(", "),e("code",[v._v("buildBullet")]),v._v(" 和 "),e("code",[v._v("buildEmitter")]),v._v(".")]),v._v(" "),e("li",[e("strong",[v._v("touhou:")]),v._v(" @stg/bullets 包更名为 @stg/touhou, 用来维护更多东方 Project 相关的数据.")])]),v._v(" "),e("h3",{attrs:{id:"修复与其他"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修复与其他","aria-hidden":"true"}},[v._v("#")]),v._v(" 修复与其他")]),v._v(" "),e("ul",[e("li",[e("strong",[v._v("core:")]),v._v(" 优化了资源的加载, 防止了重复加载的行为.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" "),e("code",[v._v("scheduleLimit")]),v._v(" 和 "),e("code",[v._v("maxBulletCount")]),v._v(" 被交由 config 进行处理.")])]),v._v(" "),e("h2",{attrs:{id:"v0-3-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v0-3-2","aria-hidden":"true"}},[v._v("#")]),v._v(" v0.3.2")]),v._v(" "),e("h3",{attrs:{id:"新特性-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新特性-2","aria-hidden":"true"}},[v._v("#")]),v._v(" 新特性")]),v._v(" "),e("ul",[e("li",[e("strong",[v._v("core:")]),v._v(" 增加了静态方法 "),e("code",[v._v("Coordinate.from()")]),v._v(", 作用是用给定的点构造坐标系.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" CanvasPoint 增加了属性 "),e("code",[v._v("$barrage")]),v._v(", 用于访问所处的弹幕实例.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" BulletOptions 新增了 "),e("code",[v._v("blur")]),v._v(" 属性, 用于控制生成时的弹雾效果.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" FieldOptions 增加了下列属性:\n"),e("ul",[e("li",[e("code",[v._v("control")]),v._v(": 默认的自机控制模式.")]),v._v(" "),e("li",[e("code",[v._v("borderWidth")]),v._v(": 自机活动范围的边框宽度.")]),v._v(" "),e("li",[e("code",[v._v("borderHeight")]),v._v(": 自机活动范围的边框高度.")])])]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" BarrageOptions, PlayerOptions 增加了 "),e("code",[v._v("assets")]),v._v(" 属性, 用于声明在构造前读取的资源文件.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" "),e("code",[v._v("field.getStatus")]),v._v(" 返回对象增加了 "),e("code",[v._v("bulletCount")]),v._v(" 属性, 表示当前弹幕中的子弹数量.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" "),e("code",[v._v("buildFromImages")]),v._v(" 增加一个控制自旋的参数, 当子弹旋转对称时默认时将不计算旋转以提高性能.")]),v._v(" "),e("li",[e("strong",[v._v("util:")]),v._v(" color 增加了 "),e("code",[v._v("scheme4")]),v._v(", "),e("code",[v._v("scheme8")]),v._v(" 和 "),e("code",[v._v("scheme16")]),v._v(" 属性作为东方 Project 风格的默认颜色方案.")])]),v._v(" "),e("h3",{attrs:{id:"修复与其他-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修复与其他-2","aria-hidden":"true"}},[v._v("#")]),v._v(" 修复与其他")]),v._v(" "),e("ul",[e("li",[e("strong",[v._v("core:")]),v._v(" 修复了子弹处于斜向坐标系时出现的定位错误.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" 修复了参考点在 mounted 钩子中无法通过 "),e("code",[v._v("$parent.$refs")]),v._v(" 访问自己的问题.")]),v._v(" "),e("li",[e("strong",[v._v("demo:")]),v._v(" 新增了符卡 [污秽的纯化].")]),v._v(" "),e("li",[e("strong",[v._v("demo:")]),v._v(" 在符卡 [梦幻快车] 中添加了鳞弹.")])]),v._v(" "),e("h2",{attrs:{id:"v0-3-1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v0-3-1","aria-hidden":"true"}},[v._v("#")]),v._v(" v0.3.1")]),v._v(" "),e("h3",{attrs:{id:"新特性-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新特性-3","aria-hidden":"true"}},[v._v("#")]),v._v(" 新特性")]),v._v(" "),e("ul",[e("li",[e("strong",[v._v("core:")]),v._v(" 新增 "),e("code",[v._v("loadImages")]),v._v(", "),e("code",[v._v("checkImages")]),v._v(" 和 "),e("code",[v._v("loadAssets")]),v._v(" 方法, 用于加载全局资源.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" config 新增 "),e("code",[v._v("publicPath")]),v._v(", "),e("code",[v._v("defaultColor")]),v._v(", "),e("code",[v._v("showWarning")]),v._v(" 三个属性.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" Updater 新增 "),e("code",[v._v("$assets")]),v._v(", "),e("code",[v._v("$config")]),v._v(" 属性, 它们是对应模块的引用.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" 子弹模板现在可以使用 Query 字符串, 运行时将使用类似 CSS 的优先级进行渲染.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" BulletOptions 中的 "),e("code",[v._v("judgeType")]),v._v(" 和 "),e("code",[v._v("fieldType")]),v._v(" 属性都允许传入函数.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" 新增了 "),e("code",[v._v("point.drawImage()")]),v._v(" 方法, 用于绘制来自资源文件的图形.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" 新增了 "),e("code",[v._v("use")]),v._v(" 函数, 用于加载插件, 同时 bullets 模块也用插件的方式重新实现.")]),v._v(" "),e("li",[e("strong",[v._v("bullets:")]),v._v(" 增加了对东方 Project 第二代引擎 (风神录后) 的部分弹型的支持.")]),v._v(" "),e("li",[e("strong",[v._v("bullets:")]),v._v(" 新增了 "),e("code",[v._v("colorSeries")]),v._v(" 对象, 包含了东方 Project 中默认的颜色系列.")])]),v._v(" "),e("h3",{attrs:{id:"重大变化-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重大变化-2","aria-hidden":"true"}},[v._v("#")]),v._v(" 重大变化")]),v._v(" "),e("ul",[e("li",[e("strong",[v._v("core:")]),v._v(" 重写了 Template 模块, 实现了下面的函数:\n"),e("ul",[e("li",[e("code",[v._v("defineTemplate")]),v._v(": 加载子弹模板 (相当于过去的 "),e("code",[v._v("Bullet.install")]),v._v(").")]),v._v(" "),e("li",[e("code",[v._v("buildFromImages")]),v._v(": 从图片资源中直接生成子弹模板.")])])]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" 新的 BulletTemplate 仅支持 "),e("code",[v._v("applied")]),v._v(" 和 "),e("code",[v._v("display")]),v._v(" 两个钩子函数.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" BulletOptions 中的 "),e("code",[v._v("extends")]),v._v(" 属性更名为 "),e("code",[v._v("display")]),v._v(", 同时允许传入函数.")]),v._v(" "),e("li",[e("strong",[v._v("bullets:")]),v._v(" 将涉及场地和判定相关的函数从 bullets 模块放入 core 模块.")])]),v._v(" "),e("h3",{attrs:{id:"修复与其他-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修复与其他-3","aria-hidden":"true"}},[v._v("#")]),v._v(" 修复与其他")]),v._v(" "),e("ul",[e("li",[v._v("修复了 "),e("code",[v._v("$ref")]),v._v(" 中默认包含 "),e("code",[v._v("base")]),v._v(" 而非 "),e("code",[v._v("origin")]),v._v(" 的问题.")]),v._v(" "),e("li",[v._v("移除了目前项目对 deepmerge 包的依赖.")]),v._v(" "),e("li",[v._v("打包时将生成多个入口文件:\n"),e("ul",[e("li",[v._v("stg.min.css: 所需的样式文件.")]),v._v(" "),e("li",[v._v("stg.common.js: 可直接在 NodeJS 环境下加载的模块.")]),v._v(" "),e("li",[v._v("stg.runtime.js: 应当在浏览器中加载使用的模块, 内置了所需的样式.")])])])]),v._v(" "),e("h2",{attrs:{id:"v0-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v0-3","aria-hidden":"true"}},[v._v("#")]),v._v(" v0.3")]),v._v(" "),e("h3",{attrs:{id:"重大变化-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重大变化-3","aria-hidden":"true"}},[v._v("#")]),v._v(" 重大变化")]),v._v(" "),e("ul",[e("li",[e("strong",[v._v("core:")]),v._v(" Looping 不再是 EventTarget 的子类, 对应的事件全部改用 "),e("code",[v._v("onPause")]),v._v(" 等属性来实现.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" Looping 类的 onUpdate 事件更改为 onStats, 同时增加 "),e("code",[v._v("statsInterval")]),v._v(" 属性用于控制其触发频率.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" 移除 "),e("code",[v._v("looping.resume()")]),v._v(" 等方法中的 "),e("code",[v._v("slient")]),v._v(" 参数.")])]),v._v(" "),e("h3",{attrs:{id:"新特性-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新特性-4","aria-hidden":"true"}},[v._v("#")]),v._v(" 新特性")]),v._v(" "),e("ul",[e("li",[e("strong",[v._v("core:")]),v._v(" Looping 构造函数新增 "),e("code",[v._v("skipFrame")]),v._v(" 参数, 可用于调整描画间隔.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" 新增 "),e("code",[v._v("looping.initialize()")]),v._v(" 方法, 可以用于重新初始化实例.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" 新增 "),e("code",[v._v("config.angleUnit")]),v._v(", 用于配置采用的角度单位, 默认为 "),e("code",[v._v("Math.PI")]),v._v(".")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" "),e("code",[v._v("looping.getStatus()")]),v._v(" 返回对象新增 "),e("code",[v._v("frameRate")]),v._v(" 属性, 表示当前物理帧数.")])]),v._v(" "),e("h2",{attrs:{id:"v0-2-1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v0-2-1","aria-hidden":"true"}},[v._v("#")]),v._v(" v0.2.1")]),v._v(" "),e("h3",{attrs:{id:"重大变化-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重大变化-4","aria-hidden":"true"}},[v._v("#")]),v._v(" 重大变化")]),v._v(" "),e("ul",[e("li",[e("strong",[v._v("core:")]),v._v(" 移除 Bullet 构造函数的 "),e("code",[v._v("rel")]),v._v(" 属性, 改为 "),e("code",[v._v("origin")]),v._v(", 同时支持传入 Point 类型.")]),v._v(" "),e("li",[e("strong",[v._v("utils:")]),v._v(" 将库 utils.Random 更改为 random.")])]),v._v(" "),e("h3",{attrs:{id:"新特性-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新特性-5","aria-hidden":"true"}},[v._v("#")]),v._v(" 新特性")]),v._v(" "),e("ul",[e("li",[e("strong",[v._v("core:")]),v._v(" 加入了默认的自机判定点颜色和大小.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" 当调用 "),e("code",[v._v("scene.setBarrage()")]),v._v(" 方法时会自动清屏.")]),v._v(" "),e("li",[e("strong",[v._v("utils:")]),v._v(" 新增库 utils.color, 用于处理颜色.")])]),v._v(" "),e("h2",{attrs:{id:"v0-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v0-2","aria-hidden":"true"}},[v._v("#")]),v._v(" v0.2")]),v._v(" "),e("h3",{attrs:{id:"新特性-6"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新特性-6","aria-hidden":"true"}},[v._v("#")]),v._v(" 新特性")]),v._v(" "),e("ul",[e("li",[e("strong",[v._v("core:")]),v._v(" 支持无自机模式 (观赏模式). 当不涉及自机时, 子弹会跳过碰撞判定.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" 自机新增属性 "),e("code",[v._v("control")]),v._v(", 用来决定是鼠标操控还是键盘操控.")]),v._v(" "),e("li",[e("strong",[v._v("core:")]),v._v(" 类 Field 的大部分功能由新类 Scene 完成, 前者保留对外层 DOM 的控制.")]),v._v(" "),e("li",[e("strong",[v._v("utils:")]),v._v(" 将 math 和 memorize 相关函数转移到 @stg/utils 下.")])]),v._v(" "),e("h3",{attrs:{id:"修复和其他"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修复和其他","aria-hidden":"true"}},[v._v("#")]),v._v(" 修复和其他")]),v._v(" "),e("ul",[e("li",[e("strong",[v._v("core:")]),v._v(" 修复了 "),e("code",[v._v("point.$coord")]),v._v(" 不及时更新的问题.")]),v._v(" "),e("li",[e("strong",[v._v("bundle:")]),v._v(" 生成了源代码的 source map.")])])])},[],!1,null,null,null);_.default=r.exports}}]);